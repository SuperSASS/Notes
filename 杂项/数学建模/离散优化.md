# 离散优化

目录：

* 离散优化问题概述
* 建立优化模型的要点和技巧
* 常见离散优化模型
* 离散优化问题的经典算法
* 启发式算法与离散优化
* 计算机模拟与离散优化

## 1. 离散优化问题概述

离散问题是图论、网络流、整数规划（部分或全部变量为整数）、组合数学等学科研究的问题。  
具体问题如“锁具装箱”、“天车作业调度”、“灾情巡视路线”等问题。

重点是选择适当的**决策变量**、目标函数、约束条件。

*对于表示状态决策变量，常采用$01$取值变量来表示。*

表示只能处于一种区域、选一种情况（独热码）：$\sum a_i = 1$

## 2. 建立优化模型的要点和技巧

### 要点

1. 准确理解题意  
   * 最终要解决的问题
   * 单/多目标问题
2. 选择适当的决策变量
   * 最优解的目标由哪些因素决定
3. 用决策变量表示目标函数
   * 有时需要引入中间变量
   * 有时要利用取整函数、符号函数、绝对值函数等
4. 仔细分析约束条件
   * 自身应有的约束
   * 题目要求、客观实际的约束

### 需要注意的技巧

1. 多目标问题的妥协  
   多个目标时，不可能两个同时到达最大，需要进行妥协。
2. 非线性规划的线性化  
   引入人工变量将非线性规划问题线性化，提高求解精度、降低计算时间。
3. 复杂规划问题的拆分  
   将复杂问题划分为一系列简单的子问题。

> 非线性规划线性化举例 - 分段函数：
>
> ![图 1](images/%E7%A6%BB%E6%95%A3%E4%BC%98%E5%8C%96--08-16_09-11-36.png)
>
> 其中：  
> $y_i$就是分段函数的若干段，  
> $z_i$是引入变量，为$01$变量，与$y_i$对应。

## 3. 常见离散优化模型

使用 **Lingo** 可以解决部分优化模型，  
需要构建目标函数和约束条件。

### 1. 下料问题模型（木材切割）

### 2. 指派问题模型（01规划模型）

$n$个工作$n$个人，每个人做每个工作效率不一样，怎么分派总耗时最小。

### 3. 选址问题模型

### 4. 装箱问题模型

$n$个物品，体积分别为$v_i$，  
要求把这$n$个物品装到若干个容量为$V$的箱子中，  
问最少用多少个。

可能为$1 \sim 3$维。

> 装箱问题以及建模：
>
> ![图 2](images/%E7%A6%BB%E6%95%A3%E4%BC%98%E5%8C%96--08-16_09-18-01.png)

### 5. 背包问题

### 6. 最短路问题

> 最短路问题的目标函数和约束条件：
>
> ![图 3](images/%E7%A6%BB%E6%95%A3%E4%BC%98%E5%8C%96--08-16_09-19-58.png)

图论问题中，善用**入度和出度**进行约束。

### 7. TSP问题

找从一点出发，不重复地走过所有的结点，最后又回到原出发点的路径的问题，  
图论中称为“哈密尔顿回路问题”。

> TSP问题的目标函数和约束条件：
>
> ![图 4](images/%E7%A6%BB%E6%95%A3%E4%BC%98%E5%8C%96--08-16_09-27-38.png)
>
> 其中第三条约束条件的解释：  
> ![图 5](images/%E7%A6%BB%E6%95%A3%E4%BC%98%E5%8C%96--08-16_09-28-20.png)  
> 因此使得子圈不可能存在，所有点都包含在起点构成的大圈中。

建立约束条件的核心思想——**破圈**。

## 4. 经典算法

* 经典算法
  * 分支限界法
  * 割平面法
  * 动态规划法
* 随机算法
  * 模拟退火法
  * 遗传算法

考虑计算精度和计算量两个方面的指标。

### 1. 回溯法

### 2. 分支限界法

### 3. 贪心算法

* NF(Next Fit, 下次适应)算法  
  每次只看当前的一个箱子，放得进去就放，放不进去就用新箱子。  
  速度最快，效率最差。
* FF(First Fit, 首次适应)算法  
  在已经使用过的箱子中找能不能放进去，不能再放新箱子。  
  由于需要遍历之前用过的箱子，速度较低，效率较好。
* FFD(降序首次适应)算法  
  将物品排序后再用FF算法。

### 4. 最短路算法

* Dijkstra
* Floyd

### 5. DP

步骤：

* **确定问题的阶段**  
  看将整个问题划分为了几个决断
* 确定状态变量
* 确定决策变量
* **确定状态转移方程**
* 确定目标函数

几个关键词：

* 阶段：原问题分成若干相互联系的子问题，每个子问题为一个阶段，可以从一个阶段通过状态转移方程转移到另一个阶段。
* 状态：每阶段可能的情况状态，
* 决策：在某一阶段的某一状态下，可以做出不同决定，从而进入到下一阶段的某一状态。
* 策略：
* ……

### 6*. 搜索方法的确定 - 碎球问题

> $100$层楼，$2$个玻璃球，某一层扔下**会碎**，问怎么找到这个临界层。

首先如果只有$1$个玻璃球，只能穷举，从$1$楼到$100$楼依次扔，直到碎了找到。  
但多了一个玻璃球，就可以确定一个**更小的范围$[L,R]$**，碎了后就在这个确定的范围$[L,R]$内穷举。

方法：

1. 二分  
   没碎的话很优秀，直接$\log$，  
   但碎了的话，因为只有$1$个玻璃球了，只能穷举从左边界到右边界。  
   因此每个范围，**其最坏搜索次数不一致**。
2. 粗调细调
   

### 7. 启发式算法

最优解难求，求近似解。  
最大的问题：对于多峰函数，会陷入局部最优解。

1. CW节约算法
2. 遗传(GA)算法  
   要点：
   1. 编码
   2. 解码
   3. **交配**
   4. **突变**
   5. 倒位
   6. 个体适应度评估（怎么选择下一代，一般用目标函数评估）

   参数的确定与影响：
   1. 种群规模
   2. 迭代次数

   注意点：
   * 使得交叉变异后，尽量保证在可行域内，否则直接删除后会导致种群规模下降。
3. 模拟退火算法  
   温度越高，系统越乱，百家争鸣，更优解会被接受，但更差解也**可能**被接受（说不定后面能从这个更差解进化成最优解），  
   这个可能的概率，由当前的温度，以及其靠谱程度决定；  
   温度逐渐降低，系统趋于稳定，越来越只接受更优解。

## 6. 计算机模拟

适合用计算机仿真求解的特征：

* 局部规律已知，全局表现未知。
* 具有随机因素。

计算机仿真问题分为四类：

1. 物理规律仿真
2. 系统演变仿真
3. 蒙特卡洛方法
4. 离散事件仿真

## 7. 经典例题 - 穿越沙漠

* 决策变量
  * $x_{ti}$ - 第$t$天位于区域$i$
  * $y_{ti}$ - 第$t$天在$i$区域停留
  * $z_{t}$ - 第$t$天挖矿
* 约束条件，需要考虑决策变量之间的关系。
  * $x$与$y$的关系：

    $$
    $$

  * $y$与$z$的关系：

    $$
    $$

  * 玩家只能沿着相邻的区域行走  
    如$1$与$2$,$3$相连：

    $$
    x_{t,1}\le x_{t+1,1}+x_{t+1,2}+x_{t+1,3}
    $$
* 动态规划描述目标变量 - 资金  
  游戏的天数拥有明显的**阶段性质**，因此可考虑动态规划。