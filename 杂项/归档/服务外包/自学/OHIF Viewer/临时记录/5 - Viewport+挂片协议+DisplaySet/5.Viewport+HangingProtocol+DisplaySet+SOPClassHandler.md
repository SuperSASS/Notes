# æœ‰å…³ Viewport + HangingProtocol + DisplaySet + SOPClassHandler çš„ç»¼åˆæ€»ç»“

~~åœ¨Modeä¸­ï¼Œåˆå§‹çš„Viewportå¸ƒå±€ï¼Œä¸`hangingProtocol`å’Œ`viewports`å±æ€§å…±åŒå†³å®šã€‚~~

æš‚æ—¶è®°å½•ï¼š  
æ„Ÿè§‰è·ŸModeé‡Œçš„`viewports`å±æ€§å¹¶ä¸å¤§ï¼Œ  
ä¸»è¦æ˜¯æ ¹æ®`hangingProtocol`å†³å®šçš„ã€å› ä¸ºæœ¬èº«Hanging Protocolä¸­å°±è§„å®šäº†viewportã€‘ã€‚  
è€ŒModeé‡Œçš„`viewports`ï¼Œæˆ‘æ„Ÿè§‰ä¸»è¦æ˜¯æä¾›ä¸SOP Class Handlerçš„ç»‘å®šã€‚

Modeé‡Œå®šä¹‰çš„`viewports`ï¼Œç¬¬ä¸€æ˜¯å‘Šè¯‰è¯¥Modeæ”¯æŒçš„viewportç±»å‹ã€‚  
å¦‚ä¸‹é¢çš„æƒ…å†µï¼š  
![å›¾ 2](images/5.Viewport%2BHangingProtocol%2BDisplaySet--03-29_04-16-36.png)  
å½“`hangingProtocol`ä¸ºmpræ—¶ï¼Œä½†`viewports`å®šä¹‰çš„æ˜¯æ˜æ˜¾ä¸ç¬¦çš„PDFçš„ï¼Œ  
åˆ™åŠ è½½çš„æ—¶å€™ä¼šå¼¹çª—æŠ¥é”™å¦‚ä¸‹ï¼š  
![å›¾ 3](images/5.Viewport%2BHangingProtocol%2BDisplaySet--03-29_04-17-32.png)  
å†è®¾æ–­ç‚¹(platform/viewer/src/component/ViewportGrid.tsx)ï¼Œå¯çœ‹åˆ°å¦‚ä¸‹æƒ…å†µï¼š  
![å›¾ 4](images/5.Viewport%2BHangingProtocol%2BDisplaySet--03-29_04-23-57.png)

é‚£ä¹ˆæƒ…å†µå°±å¤§è‡´æ¸…æ™°äº†ä¸€ä¸‹ï¼š

* `viewports`ï¼šå®šä¹‰è¯¥Mode**æ”¯æŒçš„viewport**ï¼Œä»¥åŠå…¶**å¯¹åº”çš„SOP Handler**ï¼Œæ•…ä¸€èˆ¬ç…§æŠ„ï¼ˆä¸åŒ…å«ä»»ä½•Viewportæœ¬èº«çš„å®šä¹‰ã€å®ç°ï¼‰
* `hangingPotocol`ï¼šå®šä¹‰äº†**åˆå§‹é¡µé¢æ˜¾ç¤ºçš„Viewport**ï¼Œä»¥åŠå„ä¸ªViewportçš„å±æ€§
* `displaySet`ï¼šæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±æ˜¯è½¬æ¢æˆOHIFåçš„ï¼ˆéï¼‰**å½±åƒæ˜¾ç¤ºé›†**
* `sopClassHandlers`ï¼š~~è™½ç„¶æ˜¯æŠŠdisplaySetæ”¾åˆ°hangingPotocolå®šä¹‰çš„viewportä¸Š~~  
  æ„Ÿè§‰ç†è§£æœ‰è¯¯ï¼Œè¿™ä¸ªæ˜¯æŠŠDICOMå…ƒæ•°æ®(Metadata)(æˆ–è¯´DICOM SOP Class)è½¬æ¢ä¸ºDisplaySetçš„ï¼ˆå°±æ˜¯åœ¨å·¦ä¾§å¯ä»¥å±•ç¤ºçš„ä¸œè¥¿ï¼‰  
  å¯¹äºæ¯ä¸ªinstanceçœ‹åˆ°çš„å…ƒæ•°æ®è§ä¸‹å›¾ï¼š  
  ![å›¾ 6](images/5.Viewport%2BHangingProtocol%2BDisplaySet--03-31_04-01-45.png)  
  è½¬æ¢ä¸ºdisplaySetï¼ˆè§ä¸‹å›¾ï¼‰  
  ![å›¾ 7](images/5.Viewport%2BHangingProtocol%2BDisplaySet--03-31_04-02-09.png)  
  è¿˜å¯ä»¥çœ‹è§ä¸Šé¢æœ‰ä¸ª`SOPClassHandlerId`å±æ€§ï¼Œå°±ä»£è¡¨è¿™ä¸ªDICOMå…ƒæ•°æ®æ˜¯ç”±å“ªä¸ªHandlerç¿»è¯‘è§£é‡Šçš„ã€‚

  å­˜åœ¨æœ‰ç‚¹ä¸æ¸…æ¥šçš„ç‚¹ï¼š
  ![å›¾ 5](images/5.Viewport%2BHangingProtocol%2BDisplaySet--03-29_04-28-02.png)  
  è¿™æ˜¯Modeåªå®šä¹‰äº†ä¸€ä¸ªSOP Handlerï¼Œæ‰€ä»¥å›¾ä¸Šåªæœ‰ä¸€ä¸ªï¼›  
  **é—®é¢˜**ï¼šä½†å¦‚æœå®šå¤šä¸ªï¼ŒæŸä¸€å…·ä½“çš„DisplaySetè¯¥æ€ä¹ˆé€‰æ‹©SOP Handlerï¼Ÿ

è¡¥å……ä¸€ä¸ªDebugå¯ä»¥çœ‹çš„ï¼š  
platform/viewer/src/component/ViewportGrid.tsx  
å…¶ä¸­çš„`getViewportPanes()`å°±æ˜¯åœ¨å›¾ç‰‡æ‹–è¿›ï¼ˆåŒå‡»ï¼‰åˆ°viewportæ—¶ï¼Œè·å¾—å„ä¸ªviewportçš„å¯¹åº”å›¾åƒçš„å‡½æ•°ï¼Œå¯åœ¨317è¡Œæ‰“ä¸ªæ–­ç‚¹ã€‚

## æŒ‚ç‰‡åè®®

æŒ‚ç‰‡åè®®æœåŠ¡ä¸­ï¼Œ`protocols`ä¿å­˜äº†ç›®å‰æ‰€æœ‰æ’ä»¶æä¾›çš„åè®®ï¼š
![å›¾ 1](images/5.Viewport%2BHangingProtocol%2BDisplaySet--03-29_04-01-21.png)

éœ€è¦æ˜ç¡®æŒ‚ç‰‡åè®®å¹²å˜›çš„ï¼š

* æ¯ä¸€åˆ‡ç‰‡çš„åŠ è½½ç­–ç•¥
* è§„å®šViewportçš„è‹¥å¹²ç§çŠ¶æ€
  * å¸ƒå±€
  * æ¯ä¸€ä¸ªViewport
    * Idã€Typeã€æ–¹å‘ã€toolGroupIdã€SyncGroups

## éœ€è¦çŸ¥é“æ¸²æŸ“æµç¨‹

### 0. OHIFCornerstoneViewport

ä½¿ç”¨çš„Viewportï¼Œåº”è¯¥éƒ½æ˜¯è¿™ä¸ªã€‚
`extensions\cornerstone\src\Viewport\OHIFCornerstoneViewport.tsx`

Viewportçš„ç±»å‹ï¼š  
![å›¾ 1](images/5.Viewport%2BHangingProtocol%2BDisplaySet%2BSOPClassHandler--04-07_05-02-25.png)  
[ViewportType](https://www.cornerstonejs.org/api/core/namespace/enums/#ORTHOGRAPHIC)

### 1. è¿›å…¥Modeåï¼Œä»åˆå§‹åŒ–DisplaySetï¼ˆæœªåŠ è½½æ•°æ®ï¼‰ï¼Œåˆ°é€šè¿‡HPæŒ‚è½½åˆ°Viewportä¸Šçš„æµç¨‹

è¿›å…¥Modeåï¼Œåˆå§‹åŒ–å¦‚ä¸‹å›¾ï¼š  
![å›¾ 6](images/5.Viewport%2BHangingProtocol%2BDisplaySet%2BSOPClassHandler--04-10_01-38-22.png)  
*è°ƒç”¨è¿™ä¸ªæ—¶ï¼Œç”»é¢è¿˜åœ¨åŠ è½½Modeï¼Œå¹¶æ²¡æœ‰è¿›å…¥Modeå‘ˆç°ä¸»ç•Œé¢ã€‚*

**æ­¥éª¤ï¼š**

0. è®¢é˜…DicomMetadataStoreçš„`INSTANCES_ADDED`äº‹ä»¶ï¼Œ  
   äº‹ä»¶æ„ä¹‰ä¸ºï¼šæ·»åŠ äº†ä¸€ä¸ªSeriesçš„æ‰€æœ‰Instances-OHIF-Metadataï¼Œ  
   äº‹ä»¶æ¿€æ´»åï¼šä¼šè·å–è¯¥Series-OHIF-Metadataï¼Œç„¶åé€šè¿‡`displaySetService.makeDisplaySets(seriesMetadata.instances, madeInClient)`ï¼Œå°†è¯¥Series(instances)è½¬æ¢ä¸ºDisplaySetã€‚  
1. é¦–å…ˆè°ƒç”¨`dataSource.retrieve.series.metadata`ï¼Œä»DICOM WebæœåŠ¡å™¨è¯»å–è¯¥Studyçš„æ‰€æœ‰çš„Seriesçš„metadataï¼Œä¸ºDICOM-Series-Metadataç±»å‹ã€‚  
   *ã€è™½ç„¶ä¸€èˆ¬ä¸ºå•ä¸ªStudyInstanceUidï¼Œä½†å¦‚æœå·¦ä¾§é¢æ¿æ‰“å¼€äº†Allå­˜åœ¨å¤šä¸ªStudiesï¼Œåˆ™ä¼šå¯¹æ¯ä¸ªStudyè¿›è¡Œmetadataè·å–ã€‚*  
   * **è·å–åçš„OHIF-Instance/Series-Metadataä¼šå­˜å‚¨åˆ°DicomMetadataStoreæœåŠ¡é‡Œ**
   * æ³¨æ„ï¼šä¸€ä¸ªStudyå­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªSeriesï¼Œè€Œåœ¨ModeInit(defaultRouteInit)è®¢é˜…äº†DicomMetadataStoreçš„`INSTANCES_ADDED`äº‹ä»¶ã€‚  
   è€Œ`dataSource.retrieve.series.metadata`ä¸­ï¼Œæ¯åŠ è½½å®Œä¸€ä¸ªSeriesï¼Œä¼šè°ƒç”¨`DicomMetadataStore.addInstances()`(extensions\default\src\DicomWebDataSource\index.jsçš„329è¡Œ)ï¼Œæœ€ç»ˆæ·»åŠ ä¸€ä¸ªSeries(instancesï¼Œæ³¨æ„æœ‰s)å¹¶å‘å¸ƒ`INSTANCES_ADDED`ï¼Œä¸­è½¬åˆ°2ã€‚
2. **æŸä¸€ä¸ªSeries**ï¼ˆè€Œä¸æ˜¯Studyçš„æ‰€æœ‰Seriesï¼‰åŠ è½½å®Œæˆåï¼Œå¯¹displaySetæœåŠ¡è°ƒç”¨`makeDisplaySets`å‡½æ•°  
   **åœ¨å†…éƒ¨çš„æ•ˆæœï¼š**å¯¹äºæ¯ä¸€ä¸ªSeriesï¼Œæ ¹æ®Modeé‡Œçš„`sopClassHandlers`ï¼Œæ‰¾æœ‰æ²¡æœ‰æ»¡è¶³èƒ½è§£æçš„SOPClassHandlerï¼ŒæŠŠå…¶ä»Metadataè½¬æ¢ä¸ºDisplaySetã€‚  
   ![å›¾ 7](images/5.Viewport%2BHangingProtocol%2BDisplaySet%2BSOPClassHandler--04-10_01-43-23.png)  
   è¿™æ ·ï¼Œå·²ç»å®Œæˆäº†ModeConfigé‡Œçš„`sopClassHandlers`å±æ€§çš„ä»»åŠ¡ï¼š**å°†instancesè½¬æ¢ä¸ºdisplaySet**ï¼Œå¹¶**å­˜åˆ°äº†`activeDisplaySets`æ´»è·ƒdisplaySetä¸­**ã€‚  
   åœ¨æ­¥éª¤1å®Œæˆåï¼Œ2æ­¥éª¤ä¹Ÿéšä¹‹å®Œæˆã€‚
3. è°ƒç”¨`hangingProtocolService`çš„`run()`ã€å‡è®¾åªå­˜åœ¨ä¸€ä¸ªHPï¼Œè·³è¿‡æ’åæ­¥éª¤ï¼Œæ•…HPIdå°±æ˜¯å®ƒã€‘  
   è™½ç„¶ä¸æ¸…é™¤æµç¨‹ï¼Œä½†å°±æ˜¯æ ¹æ®ä»€ä¹ˆæ–¹æ³•ï¼Œæœ€ç»ˆå®‰æ’è¯¥DisplaySetï¼Œåˆ°Modeä¸­çš„èƒ½è§£é‡Šè¯¥DisplaySetçš„`viewports`ä¸­ã€‚  
   æ‰€ä»¥è™½ç„¶HPé‡Œå®šä¹‰äº†Viewportçš„æœ€å¤–å±‚æ¡†æ¶ï¼Œä½†æœ€ç»ˆè½å®çš„Viewportä¸ä¸€æ ·ï¼Œå¯èƒ½é€ æˆå±æ€§ä¸ä¸ºé¢„æœŸï¼ˆå…¸å‹çš„å°±æ˜¯ToolGroupï¼‰ã€‚
   e.g. å¯¹äºSEGç±»å‹çš„Viewportï¼Œå…¶å†…éƒ¨ä¼šé¢å¤–å¸¦ä¸€å±‚SEGViewportï¼Œå…¶`ToolGroupId`ä¸º`SEGToolGroup-0`è¿™æ ·ã€‚
   * åŒæ—¶ï¼Œå¯¹äºdisplaySetğŸ‘‰Viewportï¼Œæ˜¯æŒ‰Viewportçš„é¡ºåºï¼ŒæŸ¥æ‰¾å¯å±•ç¤ºè¯¥displaySetçš„Viewportï¼Œä»£ç å¦‚ä¸‹ï¼š  
     ![å›¾ 8](images/5.Viewport%2BHangingProtocol%2BDisplaySet%2BSOPClassHandler--04-10_12-03-47.png)  

**å½“è¿™ä¸ªæ­¥éª¤å®Œæˆåï¼Œä¾¿å¯ä»¥è¿›å…¥åˆ°Viewerä¸­ï¼Œçœ‹åˆ°æœªåŠ è½½æ•°æ®ä¸€ç‰‡æ¼†é»‘çš„å¸ƒå±€äº†ã€‚**

### 1.*1 å…·ä½“çš„SOPClassHandlerè§£ææŸä¸€Series(OHIF-Series-Metadata/instances, æ³¨æ„æœ‰s)çš„æµç¨‹

*è¿™å±äºä¸Šé¢ä¸­2çš„æµç¨‹ã€‚*

å¯ä»¥çœ‹SEGæ–‡ä»¶çš„"getSopClassHandlerModule.js"ï¼Œé‡Œé¢æœ‰æ³¨é‡Šï¼Œä¸è¿‡è¿™é‡Œæ¢³ç†å®Œæ•´æµç¨‹ï¼š

0. åœ¨displaySetæœåŠ¡è°ƒç”¨`makeDisplaySets`åï¼Œå‡ ä¹æ˜¯ç›´æ¥å†è°ƒ`makeDisplaySetForInstances`ï¼Œ  
   è¿™é‡Œé¢**ä¼šéå†sopClassHandler**ï¼Œæ‰¾åˆ°èƒ½ç”¨çš„ï¼ˆ`if (sopClassUids.include())`ï¼‰ï¼Œç„¶åè°ƒç”¨sopClassHandlerModuleæä¾›çš„`getDisplaySetsFromSeries(instances)`æ¥å£å‡½æ•°ã€‚
1. `_getDisplaySetsFromSeries()`ä½œä¸ºæ¥å£çš„å…¥å£å‡½æ•°ï¼Œæœ€ç»ˆä¼šåˆ›å»ºå¥½ä¸€ä¸ªdisplaySets(æ³¨æ„æœ‰s)ï¼Œ  
   ä½†æ­¤æ—¶å¹¶æ²¡è¯»å–æ•°æ®ï¼š`loaded = loading = false`ã€‚  
   æ¯”å¦‚å¯¹äºSEGæ–‡ä»¶çš„Handlerï¼š  
   ![å›¾ 13](images/5.Viewport%2BHangingProtocol%2BDisplaySet%2BSOPClassHandler--04-13_03-01-14.png)

### 2. è¿›å…¥Vieweråï¼Œåˆå§‹åŒ–Viewportã€ä»ç„¶æ— æ•°æ®

åœ¨è¿›å…¥Vieweråï¼Œæ¯åˆ›å»ºViewportç»„ä»¶ï¼Œå°±ä¼šè¿›è¡Œåˆå§‹åŒ–ï¼Œåœ¨è¿™é‡Œä¸€èˆ¬å°±è¦ç”Ÿæˆå±•ç¤ºçš„æ•°æ®äº†ã€‚  
å¦‚æ™®é€šçš„CornerstoneViewportï¼Œå°±ä¼šè°ƒå„ç§å‡½æ•°åŠ è½½PixelDataæ•°æ®ï¼Œç„¶åæ¸²æŸ“åˆ°ä¸€ä¸ª`<div>`ä¸Šï¼›  
è€Œæˆ‘ä»¬å®ç°çš„Viewportï¼Œä¹Ÿæ˜¯åˆ©ç”¨`cornerstoneWADOImageLoader.wadors.metaDataManager.add()`ç”Ÿæˆä¸€äº›æ•°æ®ï¼Œä¾›`loadDataset()`å¯ç”¨ï¼Œå†ç”¨å…¶ä¸­çš„`vtkImageData`å³å¯ã€‚

ä¼šå‘ç°ï¼šåˆ°å…¨æ¡†æ¶åŠ è½½å¥½åï¼Œå½±ç‰‡æ˜¯æ…¢æ…¢åŠ è½½å‡ºæ¥çš„ã€‚  
è¿˜è®°å¾—åŸæ¥HangingProtocolä¸­è®¾ç½®çš„åŠ è½½ç­–ç•¥å—ï¼Œå°±æ˜¯è¿™é‡Œçš„åŸå› ã€‚

åœ¨Viewporté‚£äº›éƒ½è®¾ç½®å¥½åï¼Œæ­¤æ—¶ï¼Œæ¸²æŸ“çš„**å…³é”®æ•°æ®`pixelData`è¿˜å¹¶æœªè¯»å–**ï¼Œæ‰€ä»¥çœ‹åˆ°çš„æ˜¯ä¸€ç‰‡ç©ºç™½ã€‚  
åœ¨è¿™ä¸€æ­¥ï¼Œä¸»è¦å°±æ˜¯è®¾ç½®viewportçš„å±•ç¤ºæ•°æ®ï¼Œç„¶ååŠ è½½pixelDataï¼Œä»è€ŒåŠ¨æ€æ›´æ–°viewportã€‚

å¦‚æœé‡‡ç”¨ä¸€èˆ¬çš„`cornerstoneViewport`ï¼ŒViewportçš„`loadViewport`å‡½æ•°ä¼šè¦æ±‚åŠ è½½æ•°æ®ï¼Œç„¶åä¼šè°ƒåœ¨"CornerstoneViewportService.ts"é‡Œçš„`setViewportData`->`_setDisplaySets`->`_setVolumeViewport`
ï¼Œ  
ä¹‹åï¼Œä¼šè°ƒç”¨"HangingProtocolService"çš„`runImageLoadStrategy`ï¼Œæ ¹æ®æ‰€é€‰æ‹©çš„ç­–ç•¥ï¼Œé€æ­¥åŠ è½½åƒç´ æ•°æ®pixelDataã€‚

å¯ç”¨ç­–ç•¥åï¼Œä¼šå‘å¸ƒ`CUSTOM_IMAGE_LOAD_PERFORMED`äº‹ä»¶ï¼Œè¢«"extensions\cornerstone\src\init.tsx"æ¥æ”¶ã€‚  
![å›¾ 2](images/5.Viewport%2BHangingProtocol%2BDisplaySet%2BSOPClassHandler--04-07_05-07-28.png)  
å¯¹äº`extensions\cornerstone\src\init.tsx`é‡Œè®¢é˜…çš„`CUSTOM_IMAGE_LOAD_PERFORMED`çš„è§¦å‘æµç¨‹ï¼š  
åœ¨`runImageLoadStrategy()`\[HangingProtocolService.ts] â† `_setVolumeViewport()`\[CornerStoneViewportService.ts] â† `_setDisplaySets()`\[.] â† `setViewportData()`\[.] â† `loadViewportData()`\[OHIFCornerstoneViewport.tsx]

è¡¥å……ï¼š

* `viewportData.datas`æ¥æºäºå®šä¹‰æŒ‚ç‰‡åè®®æ—¶çš„æ¯ä¸ªViewportçš„`displaySets`  
  è€Œ`lutPresentation`åˆ™æ¥æºäº`displaySet`é‡Œçš„`options`  
  ![å›¾ 3](images/5.Viewport%2BHangingProtocol%2BDisplaySet%2BSOPClassHandler--04-07_05-22-11.png)  
  ![å›¾ 4](images/5.Viewport%2BHangingProtocol%2BDisplaySet%2BSOPClassHandler--04-07_05-22-43.png)

### 3. å¼‚æ­¥åŠ è½½PixelDataæ•°æ®ã€è‡ªåŠ¨æ¸²æŸ“åˆ°Viewportä¸Šæµç¨‹ - ä»æ— åˆ°æœ‰

è¿è¡Œç­–ç•¥åï¼Œä¼šå¼‚æ­¥åŠ è½½æ•°æ®ï¼ˆæ‰€ä»¥é‚£ä¸ªäº‹ä»¶`CUSTOM_IMAGE_LOAD_PERFORMED`åªæ˜¯ä»£è¡¨åŠ è½½æ­£åœ¨è¿›è¡Œï¼‰ï¼Œ  
å‡å¦‚æ˜¯`interleaveTopToBottom`ç­–ç•¥ï¼š  
ä¼šåœ¨æ¥è‡ª"@cornerstonejs/core"çš„`imageLoadPoolManager`ç®¡ç†æ± ä¸­åŠ å…¥è¯»å–æ¯ä¸€ä¸ªåˆ‡ç‰‡(Instance)çš„è¯·æ±‚(Request)ï¼ˆå¯è§å¤§çº¦115è¡Œï¼‰  
![å›¾ 9](images/5.Viewport%2BHangingProtocol%2BDisplaySet%2BSOPClassHandler--04-11_15-28-10.png)  
å¯çœ‹æ³¨é‡Šã€‚

![å›¾ 10](images/5.Viewport%2BHangingProtocol%2BDisplaySet%2BSOPClassHandler--04-11_15-29-27.png)  

å…¶ä¸­ï¼š

* `handleArrayBufferLoad` - ä¸»è¦æ˜¯æŠŠå½±åƒæ•°æ®(PixelData, scalarData, ArrayBuffer)åŠ è½½è¿›å»
* `successCallback` - å…·ä½“å¹²å˜›ä¸çŸ¥é“ï¼Œä¸»è¦æ˜¯ä¼šè°ƒç”¨`updateTextureAndTriggerEvents`
* `updateTextureAndTriggerEvents` - æ›´æ–°`vtkOpenGLTextur`å’Œ(vtk)`imageData`ï¼Œå¹¶è§¦å‘Cornerstone/coreçš„ Event`IMAGE_VOLUME_MODIFIED`ã€‚

æœ€ç»ˆé‚£ä¸ª`updateTextureAndTriggerEvents`ï¼Œå°±æ˜¯åŠ è½½å¥½è¿™ä¸€ä¸ªInstanceåï¼Œæ›´æ–°Viewportå½±åƒæ˜¾ç¤ºå†…å®¹(å¯¹äºCornerstoneï¼Œå±•ç¤ºå½±åƒçš„æ˜¯é‚£ä¸ªcanvas)ã€‚  
![å›¾ 11](images/5.Viewport%2BHangingProtocol%2BDisplaySet%2BSOPClassHandler--04-11_22-06-37.png)  
![å›¾ 12](images/5.Viewport%2BHangingProtocol%2BDisplaySet%2BSOPClassHandler--04-11_22-07-25.png)  

`autoLoad.js`æŒ‡çš„åº”è¯¥æ˜¯åœ¨åŠ è½½å®ŒInstanceåï¼Œè‡ªåŠ¨æ¸²æŸ“ç½¢äº†

## æœ‰å…³3D - MIP

![å›¾ 5](images/5.Viewport%2BHangingProtocol%2BDisplaySet%2BSOPClassHandler--04-07_05-29-40.png)  
å¯¹åº”Cornerstoneçš„MAXIMUM_INTENSITY_BLEND
