# Ep.8 假设检验

## 一、概念

假设检验顾名思义分为假设和检验两个方面，  
故假设检验步骤为：

1. 提出假设  
   假设，即为对总体的一种说法、推断。

   分为两类：

   * 参数假设 - 假设总体参数  
     如：正态分布总体的$\mu=500$。
   * 非参数假设 - 假设总体分布与参数  
     如：总体服从正态分布。
2. 验证  
   通过样本对提出的假设进行验证。

   思想为：基于小概率事件在一次实验中几乎不可能发生的原理。  
   提出假设后，基于这个思想验证，  
   若在这个假设条件下发生矛盾（与假设条件不一致），则拒绝该假设，否则接受该假设。

跟数学的反证法一样，证明错误只需要找出一个错误，而证明正确需要把所有方面都证明正确，  
因此我们核心思想是：  
对于我们需要证明的结论，构造一个他的**相反结论**，  
然后我们证明这个相反结论的错误，就能证明我们需要结论的正确。

## 二、大致过程

### 1. 参数假设

由上面可知，对于需要证明的东西，要构造一个相反的结论，  
**默认规定**：  

* 与要证的结论**相反的结论**，  
  称为“**原假设**”，记为$H_0$，  
* 我们**要证明的结论**，则为$H_0$这个假设的对立面，  
  称为“**备择假设**”，记为$H_1$。

#### ① 一维假设

以正态分布总体$N(\mu,\sigma^2)$为例，  
分为以下三种：

* 双侧假设
  * 原假设：$H_0:\mu=\mu_0$
  * 备择假设：$H_1:\mu\ne\mu_0$
* 左侧假设
  * 原假设：$H_0:\mu\ge\mu_0$
  * 备择假设：$H_1:\mu<\mu_0$
* 右侧假设
  * 原假设：$H_0:\mu\le\mu_0$
  * 备择假设：$H_1:\mu>\mu_0$

这里先做了解，知道有原假设$H_0$和与之对立的备择假设$H_1$，  
至于怎么提的，为什么这么提，后面再具体讲解。

#### ② 二维假设

*本课程不要求，不具体讲。*

1. 两独立假设检验  
   两个独立的总体，看这两个独立总体的参数之间的关系。

   $X\sim f_X(\Theta)$，$Y\sim f_Y(\Theta)$

   * 原假设$H_0:\theta_X=\theta_Y$  
   * 备择假设$H_1:\theta_X\ne\theta_Y$
2. 相关假设检验

还有其他类型的假设检验。

### 2. 检验

利用“反证法”，且“小概率事件不会发生”。  
如果发生，则假设错误。

#### ① 两类错误

检验势必会犯错，  
根据两种假设，检验后得到的结论，会出现两种正确结论、两种错误结论。

两种正确结论很好理解：  

* 实际上$H_0$为真，通过假设检验也认为$H_0$为真。  
  $P\{H_0\textrm{真}|H_0\textrm{真}\}$
* 实际上$H_1$为真，通过假设检验也认为$H_1$为真。  
  $P\{H_1\textrm{真}|H_1\textrm{真}\}$

而犯错的概率，我们则想尽量控制它小。

* 第一类错误 - 漏检、拒真概率：  
  本来$H_0$为真；但通过样本检验却认为$H_0$为假，因此“自然”接受了$H_1$。  
  $P(H_1\textrm{真}|H_0\textrm{真})=\alpha$
* 第二类错误 - 虚检、采假概率：  
  本来$H_0$为假；但通过样本检验却认为$H_0$为真，因此“被迫”接受了$H_0$。  
  $P(H_0\textrm{真}|H_1\textrm{真})=\beta$

> 理解“自然”和“被迫”一词：
>
> 之前提到：我们目的是拒绝$H_0$，从而证明$H_1$正确，  
> 如果检验出$H_0$为假，自然我们很开心就认为$H_1$为真，  
> 但如果没检验出$H_0$为假，这个时候跟我们预计的就不一样，我们不能证明$H_1$为真，最多通过这次检验证明$H_0$为真。

但我们不能同时控制$\alpha$和$\beta$都小，当只是减小其中一个时，会使得另一个增大。
> 拓展 - 不能同时减小两类错误的原因，可见[**知乎上这篇回答**](https://www.zhihu.com/question/20993864/answer/958223021)。

因此我们一般**只注重第一类错误**，称为显著性检验。  
$\alpha$则称为显著性水平。

> 个人理解的只注重第一类错误的原因：
>
> 由上分析可知，$\alpha$与$\beta$不能同时控制很小。  
> 因为我们将要证的结论定为了$H_1$，要推翻的结论定为$H_0$。
>
> 如果我们通过检验认为$H_0$为假拒绝了$H_0$，我们就具体做出了某个推断，即$H_1$的定论，  
> 一旦下了具体的定论，就要付出相应的责任，承担相应的后果。  
> 结论不是随便敢下的，異議あり不是随便敢喊的，  
> 因此我们要控制$\alpha$尽量小，确保我们做结论的时候不犯错。
>
> 这样规定之后，如果我们发现$H_0$不一定为假（符合检验的条件），  
> 这个时候我们只是不能拒绝$H_0$，  
> 我们已经知道“$H_0$为真”犯错的可能性$\beta$很大，  
> 因此不能确认$H_0$是真的。  
> 这个时候，我们不需要，或者说**不能做出任何推论**，也就不用承担什么严重后果。

由此，我们规定只看重第一类错误的假设，  
因此对一些现实问题，尤其是不好确定我们要研究的对象，必须要使假设适合。  

比如：原假设为“敌军来袭”，则拒真后果更严重（本来敌军来了但认为没来），所以适合；  
但如果原假设为“敌军没来”，则明显是要看重第二类错误，不合适。

#### ② 如何检验

检验肯定只能通过从总体抽样，  
抽样后的样本信息太乱，用统计量来代替这个样本的信息，  
那么就是检验：**在$H_0$的条件下，这个样本出现的概率。**

目的是要想方设法拒绝$H_0$，因此先构造一个拒绝域，  
当这个样本的统计量落在这个拒绝域中，就可以拒绝$H_0$拥抱我们的$H_1$了。

一般总体都是服从正态分布，因此拒绝域就是边缘的小概率处，  
假设也是假设的有关正态分布的参数，在$H_0$的条件下，总体的正态分布已经被假设出来，  
再根据我们的显著性水平$\alpha$，**查表得到一个临界值**，  
则在这个**临界值外的**，就是我们的拒绝域。

## 三、具体步骤 — 一维正态

对$\mu$假设检验：

1. 提出假设  
   $H_0: \mu=\mu_0,\qquad H_1: \mu\ne\mu_0$
2. 在$H_0$为真的条件下，构造某个检验统计量
   * 假设检验$\mu$：
     * $\sigma^2$已知：$U=\frac{\overline{X}-\mu_0}{\sigma_0/\sqrt{n}}\sim N(0,1)$  
3. 根据统计量和显著性水平$\alpha$，确定拒绝域的分界点  
   需要满足：$P\{(X_1,\cdots,X_n)\in w\} = \alpha$  
   则$w$为$H_0$的拒绝域。

   $|\mu - \mu_0|>C_1$
   小于则接受$H_0$，大于则接受$H_1$
4. 检验第一类错误  
   $P(H_1\textrm{真}|H_0\textrm{真})<\alpha$
