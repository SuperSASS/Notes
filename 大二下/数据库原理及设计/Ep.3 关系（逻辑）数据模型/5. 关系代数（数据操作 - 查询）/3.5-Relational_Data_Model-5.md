# 第五节 关系代数

## 一、关系代数与关系运算简介

关系代数与关系运算，是关系模型中的两个“**查询语言**”(DML)。

区别在于：

* 关系代数

只要求掌握关系代数。

---

## 二、关系代数

基本的代数表达式：  
由基本的代数操作符(Operator)，对操作数(Operand)进行一元或二元的操作。

### 1. 基本的操作符(Operator)

#### (1) 一元运算（特殊运算）

* `SELECTION` - 选择  
  从关系实例中，选择满足条件的元组（行），  
  相当于对表的**横向裁剪**。
  代数上表示为$\sigma_C(R)$，  
  其中$C$为条件式，$R$为关系实例。  
  $C$中可用关系符为：$<,\le,=,\ne,<>,\wedge,\vee,eg$。
    > e.g.  
  > $\sigma_{grade>=3}(S)$
* `PROJECTION` - 投影  
  从关系实例中，选择满足条件的属性（列），  
  相当于对表的**纵向裁剪**。
  代数上表示为$\pi_C(R)$，  
  跟选择的代数式相同。

> 一元运算对应SQL语句：
>
> ```sql
> SELECT <投影条件> from <表名> where <选择条件>
> ```
>
> e.g.
>
> ```sql
> SELECT * from Stu where SAge >= 18
> SELECT SName, SAge from Stu
  > SELECT SName from Stu where SGrade >= 90 and ender = '
  > ```
>
> **⚠注意：**  
> 关系代数中默认去除重复元素（集合要去重）；  
> 而SQL中默认不去重。  
> 若需要去重，则写成`SELECT DISTINCT`。

#### (2) 二元运算（集合运算）

* `UNION` - 并
* `DIFFERENCE` - 减
* `INTERSECTION` - 交  
  跟`UNION`一样的前提，也是取第一个表的属性为主。
* `EXCEPT` - 除去
* `CROSSPRODECT` - 笛卡尔积

并与减为最基本的运算。

前提：属性的**个数以及类型一样**，  
但属性名可以不同，以第一个表的名为主。

---

$$
\pi_{Cid, Cname}(\sigma_{Teracher='Liu'}(C)) \\
\pi_{Sid, Sname}(\sigma_{Age>=23 ^ Sgender='男'}(S))
$$

```sql
SELECT * from Stu where ClassID = '物联网-1' and SGender = '男'

SELECT cid, cname from C where credit >= 3

SELECT Cid, Cname from C where Teacher = 'LIU'
SELECT Sid, Sname from S where Age >= 23 and Sgender = '男'
```
