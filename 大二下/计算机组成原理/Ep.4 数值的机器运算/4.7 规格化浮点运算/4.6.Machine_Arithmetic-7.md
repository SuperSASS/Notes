# 第七节 规格化浮点数运算

需要明白浮点数其实就是现实中的科学计数法，  
因此根据科学计数法的运算来模拟。

## 一、浮点加减运算

浮点数记为$<\textrm{阶码}E,\textrm{尾数}M>$。

模拟科学计数法运算，先把两个数调为同阶，再直接底数运算，最后再调为标准形式。

故步骤：

1. 对阶$E$
2. 尾数$M$直接运算
3. 尾数$M$结果规格化  
   将尾数规格化形如：`00.1xxx...`或`11.0xxx`。  
   注意产生溢出如`10.xxx`，此时也可以通过右移`11.0xx`纠正。
4. 舍入  
   直接**截断**。 
5. 溢出判断  
   规格化后判断阶码$E$的双符号位。  
   分为两种处理：
   1. `01.00...0` - 上溢：停止运算，进行溢出中断操作。
   2. `10.00...0` - 下溢：不做溢出处理，当作机器零。

## 二、浮点乘法运算

模拟科学计数法运算，直接阶码相加，底数相乘。
$$
X\times Y = (M_X\times M_Y)\times 2^{E_X+E_Y}
$$

**⚠需要注意**：

* 阶码用**移码**表示时，加减法**需要修正符号位**。  
  $[E_A+E_B]_\textrm{移}=[E_A]_\textrm{移}+[E_B]_\textrm{移}+2^n$  
  即符号位变一下（因为移码自带$+2^n$，加法后便加了两次$2^n$，需要修正符号位）。
* 结果规格化时，特别关注上下溢的情况（乘法很容易上下溢出）。

## 三、浮点除法运算

方法：
$$
X / Y = (M_X / M_Y)\times 2^{E_X-E_Y}
$$

但注意尾数不能直接除，  
需要保证$|M_X|<|M_Y|$。*「？……*

步骤：

1. 预判断  
   除数和被除数为$0$。
2. 

## 四、浮点运算器的实现

## ⭐五、定点数与浮点数的运算特质

* 定点数的加法运算符`+`，满足结合律。  
  `i1+i2+i3`与`i1+(i2+i3)`结果恒相同。
* 浮点数的加法运算符`+`，不满足结合律。  
  `f1+f2+f3`与`f1+(f2+f3)`结果不一定相同。

  