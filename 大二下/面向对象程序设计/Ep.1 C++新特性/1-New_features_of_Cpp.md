# Ep.1 C++新特性

## 一、命名空间

## 二、字符串

* `s = cin.get();` - 只接收一个字符，等同于`getchar`。
* `cin.get(s,n)` - 对字符串s读取长度为n的字符串。
* `cin.getline(s,n)`

## 三、初始化

```c++
int a = 3; //Init of C
int b(3); //Init of C++
```

## 四、引用

普通变量的引用：

```c++
int &a  = b;
```

注意：

* 引用并没有开辟新的空间，与被引用变量都是同一个变量，共用空间。
* 引用后，该变量不能再引用其他变量。

---

指针引用：

```c++
int a = 10,
    *p = &a;
    *&pp = p;
```

也就是指针的别名。

---

函数返回值引用：

```c++
int n; // Global Varible
int & setValue() { return n; }
int main()
{
    setValue() = 40; //n = 40;
}
```

此时函数返回值相当于个变量。

---

注意`enum`枚举类型是不能直接`cin>>`的，  
可以变为`cin >> (int&)a`即可读入。

## 五、const

新内容：`const`与指针 - 常量指针与指针常量

```c++
int n, m;
const int* p1 = &n; //常量指针
                    //const管的是*p1，*p1不能赋值。
                    //不能通过*p1来改n的值，只读。
p1 = &m; //允许
int* const p2 = &m; //指针常量
                    //const管的是p2，p2不能赋值。
*p2 = 5; //允许
```

只需记住：`const`紧接的部分不能被修改。

常量指针注意事项：

1. 不能把常量指针赋值给非常量指针，反过来可以

   ```c++
   const int* p1 = &a;
   int* p2 = &b;
   p2 = p1; //非常量指针<-常量指针，错误
   ```

---

常引用 - `const int &a`。

同样，不能吧常引用赋值给普通引用。

## 六、函数重载

即：同一个函数，针对不同参数，适配多种功能。

```c++
int max(int a, int b);
double max(double a, double b);
```

*而在C中，是不允许有同样的函数名的。*

注意：

* 不允许引起二义性（存在多个函数均满足）。

  ```c++
  max(3,2.4); //错误，两个均可（如果只有一个是对的，会强制类型转换）
  ```

* 只能是参数的不同，不能是相同参数不同的返回值。

## 七、带默认参数的函数

可以给函数的参数加上初始值。

注意：

1. 只能从**最右侧**开始依次赋初值。

   ```c++
   int f(int a, int b=1, int c=2);
   int err(int a, int b=1, int c, int d=2); //错误
   
   f(1);   //b,c用初值
   f(1,2); //c用初值
   f(1,2,3);
   ```

2. 只能在原型声明或定义，两者中选一个给定初值。

   ```c++
   int f(int a, int b=1); //原型声明赋初值

   int f(int a, int b) { return a+b; } //定义中不能赋初值
   ```

3. 在函数重载中可能会引起二义性

   ```c++
   void f() {}
   int f(int x=5) {} //错误：调用f()时，会二义。
   ```

## 八、内联函数 - inline

为了减少函数调用时，分配参数的内存等操作的开销，引入了内联函数。  
作用是**在编译时**，将函数的代码直接插入到代码调用处，因此不会产生函数调用时的操作。

类似于**宏定义**，  
但相比于宏定义，会进行常规类型检查。

要求所内联的函数逻辑简单，一般不超过5行，且不含递归、循环之类的功能。  
否则即使加上`inline`，编辑器也不会替换。
