# Ep.9 可编程接口芯片

## 一、综述

通用并行接口的一般接口：

* 多个可编程并行数据通道  
  内含一个并行数据输入和输出缓冲器
* 控制寄存器  
  存放CPU命令字
* 状态寄存器  
  存放接口状态
* 内部地址译码电路

**外侧一侧相连的引脚：**

* 从外设输入数据时需要信号
  * 外设数据已送出 - 外设送并口
  * 输入寄存器空 - 并口送外设
* 向外设输出数据时需要信号
  * 输出寄存器满 - 并口送外设
  * 外侧接受就绪信号 - 外设送并口

**CPU一侧相连的引脚：**

* 与CPU传送数据


## 二、8255

8255上的接口：

* $D_0\sim D_7$ - 数据总线  
* $\overline{WR}$ - 写使能
* $\overline{RD}$ - 读使能
* $A1, A0$ - 内部端口的地址线
* $\overline{CS}$ - 片选信号
* $A$口、$B$口、$C$口 - 向外设的输出

### 2. 功能

* **方式0** - 基本输入/输出方式
* 方式1 - 单向选通工输入/输出方式
* 方式2

#### (1) 方式0

* 相当于三个独立的8位简单接口
* 每个独立端口既可以设置为输入口，也可以设置为输出口，但不能同时实现输入和输出  
* C端口可以是一个8为的简单接口，也可以分为2个独立的4位接口
* 常用于连接简单外设（适用于无条件传输方式或查询方式）

常使A端口和B端口作为8位数据的输入或输出口，使C口的某些位作为状态输入。

#### (2) 方式1

* 三个数据端口分为A、B两组，分别称为A组控制和B组控制
* 端口A、端口B作数据输入或输出口，  
  端口C作为联络控制信号，一部分作为A、B的联络信号，另一部分任何作为基本的输入输出口
* A、B口在作为输入和输出时的选联络制信号不同

**方式1输入时：**

作为外部设备的输入，**外部设备提供数据，供CPU读取**；  
当输入缓冲器满时，8255向CPU发送中断信号，CPU再去读取。

* $PC_0$ → $INTR_B$ - 中断请求信号  
  8255发送该信号，作为中断信号；
  内部有个中断允许信号$INTE_B$，只有$INTE_B$和$PC_1$均为高电平，才会发出中断信号
* $PC_1$ → $IBF_B$ - 输入缓冲器满  
  8255发送该信号，作为$STB$的应答信号；  
  有效时，表示8255告诉CPU，自己的输入数据缓冲器满了，除非CPU你来取走，不然我不能再读数据了
* $PC_2$ ← $\overline{STB}_B$ - 输入请求信号  
  CPU发送该信号；  
  有效时，表示CPU告诉8255，让输入数据被送入到内部的缓存器中，自己准备读取了。
* $PC_3$ → $INTR_A$
* $PC_4$ ← $\overline{STB}_A$
* $PC_5$ → $IBF_A$

**方式1输出时：**

作为CPU的输出，**CPU提供数据，供外部设备读取**。


