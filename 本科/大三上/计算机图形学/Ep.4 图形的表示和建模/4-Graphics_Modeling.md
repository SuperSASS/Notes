# Ep.4 图形表示与建模

## 一、参考坐标系

* 建模坐标系(MCS)
* 用户坐标系(WCS)

### 1. 建模坐标系

* 笛卡尔坐标系 - 左手、右手
* 圆柱坐标系
* 球坐标系
* 仿射坐标系 - 相交于球坐标系，坐标轴不互相垂直。

对于基本图形元素，在欧氏空间中，形体基本由点、线、面、环、体构成。

* 点 - 0维几何元素  
  * 表示方法：
    * 一维空间 - $\{t\}$
    * 二维空间 - $\{x,y\}, \{x(t),y(t)\}$
    * 三维空间 - $\{x,y,z\}, \{x(t), y(t), z(t)\}$
    * 齐次坐标表示
  * 控制点、型值点、插值点
* 线 - 一维集合元素  
  是两个或多个邻面的交集。  
  曲线由控制点或型值点来描述，也可用显式、隐式或参数方程来描述
* 面 - 二维集合元素  
  由一个外环（若中空，则还存在若干内环）来表示。  
  具有方向性，用外法矢方向作为该面正向。  
  平面用平面方程描述；曲面可用控制多边形或型值点来描述，也可用曲面方程描述。
* 环  
  是有序、有向边组成的面的封闭边界，不能自相交（除了起点和终点相交，其余端点连线不能相交）。  
  环有方向、内外之分。外环边是确定面的最大外边界的环，逆时针排序；内环边是确定面中内孔或凸台边界的最小内边界的环，顺时针排序。
* 体

将有限个尺寸参数定位和定形的体，称为“**体素**”，如长方体、圆锥等。

**图形对象的描述：**

* 图形信息 - 点、线、面的位置，相互之间的关系，集合尺寸  
  图形信息有几何信息和拓扑信息。
  * 几何信息 - 一般是指形体在欧氏空间中的位置和大小。
  * 拓扑信息 - 
* 非图形信息 - 线型、颜色、亮度、质量、比重、体积

**几何信息：**

数学表示：

* 点：$(x,y,z)$
* 线：$x-x_0=\frac{y-y_0}{a}=\frac{z-z_0}{b}$
* 平面：$ax+by+cz+d=0$
* 曲面：孔斯、B样条、贝塞尔曲面。

相互关系：

拓扑关系：

* 点相邻型
* 边相邻型
* 面相邻型
* 点边相邻型
* 面边相邻型
* 边面相邻型
* 边点包含型
* 面点包含型
* 面边包含型

## 四、实体的定义

* 有效实体的性质
  * 刚性，具有一定形状
  * 具有确定的封闭边界
  * 维数一致
  * 占据有限空间
  * 封闭性
* 物体的表面性质
  * 连通性
  * 有界性
  * 非自相交性
  * 可定向性
  * 闭合性

从点集拓扑的角度，将三维物体看成一个**点集**，由**边界点**和**内点**共同组成。

* 内点 - 点集中具有**完全包含**于该点集的**充分小的领域**的点。
* 边界点 - 不是内点的点。（完全在边界上，即便充分小的领域，也不会完全包含于该点集）

**点集的正则运算：**

$$
r\cdots A = c \cdots i \cdots A
$$

$A$为点集，$i$为取内点预算，$c$为取闭包运算（内点与边界点的并集），$r$为正则运算。  
即为：先对物体去内点，再取闭包的运算。

分为**正则形体**和**非正则形体**。

## 三维形体的存储模型

### 1. 线框模型

**优点：**

* 可以产生**任意视图**
* 生成任意视点或视向的透视图及轴测图
* 操作简便

**缺点：**

* 二义性，容易构造出无效形体
* 缺少面信息，不能消除隐藏线，不能任意切割，不能计算物性，不能进行两面求交等。

### 2. 表面模型

用于构造复杂的曲面物体，相交于线框模型多了一个**面表**。  
一个面号对应组成该面的若干边

**优点：**

* 能实现功能：消隐、着色、表面积计算、二曲面求交
* 擅长于构造复杂的曲面物体

**缺点：**

* 有时仍产生对物体的二义性（面的方向没有确定）

### 3. 实体模型

较于表面模型，面号的边均**按相同顺序**（如逆时针）记录。

优点：

* 消隐、切割、着色、光照等。

## 三维实体的表示方法

### 1. 分解表示

### 2. 枚举表示

先用一个包含整个物体的立方体，然后将其均匀划分成小立方体，

### 3. 八叉树表示

对空间进行自适应划分，较于枚举表示，只划分成八个子正方体。

如果满（立方体充满形体）或空（没有形体在其中），则停止划分；否则继续划分。