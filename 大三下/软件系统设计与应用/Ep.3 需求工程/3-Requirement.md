# Ep.3 需求工程

## 一、需求工程的目标

### 1. 为什么要进行需求工程

软件执行设计过程中，成功完成只占很少比例，大部分受到挑战或取消。

成功因素：

* 用户参与
* 执行层支持
* **清晰的需求描述**

而失败的因素，大部分**与需求有关**。

### 2. 需求工程的定义

对一个系统的需求，是关于该系统应当提供的服务以及对其运行的约束的描述。
**找出**、**分析**、**文档化**并**检查**这些**服务和约束**的过程，被称为需求工程。

最后需要形成：需求工程文档。

### 3. 重要性

决定软件开发是否成功的一个关键因素：

* 能帮助开发人员真正理解业务问题
* 估算成本和进度的基础（各种可行性分析的前提）
* 避免建造错误的系统，减少不必要的浪费
* 以需求规格说明书，作为各阶段的评价标准

## 二、需求分类

### 1. 用户需求和系统需求

  * 用户需求：表达高层的概要需求，自然化语言；站在用户的角度，比较笼统、不明确；面向管理者
  * 系统需求：系统应提供哪些服务的详尽描述，结构化语言；精确指出系统提供的服务和受到的约束；面向设计开发人员

### 2. 功能性需求和非功能性需求

**功能性需求：**

即**业务需求**（业务模块），给各个参与者提供哪些服务。

分类：

* 个性需求：**用户**本身提出的需求
* 领域需求：在这个**行业/领域**本身共有的需求（比如所有医院刷医保卡，需要统一认证）

**非功能性需求：**

对于性能、安全、可靠、存储、可扩展等非功能性的需求，如约束、质量等。
非功能性需求对系统的影响影响很大，其是由系统基本的体系结构关联的。
非功能性需求可能转换为功能性需求（就比如为了安全、需要登陆）。

分类：

* 产品需求：效率等
* 组织需求：交付
* 外部需求：法律、道德

非功能性需求本质上**不是行为的**，而是系统开发和实现的约束，决定了软件的质量。
常用非功能性需求术语：

* 可用性：定义系统使用的容易程度。包括帮助信息、界面美观和一致性、错误处理等
* 可靠性：由系统失效频率和严重性度量。如可靠性、鼓掌恢复时间
* 效率：性能的期望程度。如每秒处理的事务、用户操作响应时间、并发性
* 信息安全性：数据是否能保持机密性以及完整性。如数据加密程度、用户访问权限控制、敏感信息泄漏次数
  与安全性不一样，安全性指的是系统本身的稳定；而信息安全性指的是信息/数据不能泄漏。
* 适应性：是否可配置（自定义）、可维护、可扩展

为了达到这些非功能性需求，需要统计分析，然后确定架构。

> 拓展 - SaaS软件：
>
> 就是提供各种服务给用于应用，每个用户称为租户，
> 每个租户何以有自己的、隔离的大量个性化配置。
>
> 对于功能碎片化，根据租户需求启用或禁用。

## 三、需求工程过程

**5个子阶段：**

1. 获取：与用户交流，得到用户需求
2. 细化：将用户需求转化为系统需求
3. 协商：对于需求出现的冲突，进行协商解决
4. 规格说明：需求的文档化
5. 确认：对规格说明进行审核确认

**3个关键活动（不可避免）：**

* 需求获取
* 规格说明
* 有效性验证

### 1. 需求获取

需求获取过程中，软件开发技术人员和客户及系统最终用户，一起调查应用领域，理清用户到底有什么样的需求的过程。

1. 确定利益相关者：创建一个人员列表、列出有助于获取需求的人员，然后需要识别多重观点，从不同视角开展。
2. 协作收集需求：对用户进行需求引导，标识问题，协商不同方法，确定一套解决需求问题的初步方案
   * 原始方法
     * 访谈：与客户或领域专家面谈
     * 调查表：一般为面谈的补充形式
     * 观察（跟班）：观察客户对业务的处理流程
     * 文档和软件系统的研究：对客户现有在应用的文档、软件研究
   * 现代方法
     * 原型法：做演示的界面
     * 头脑风暴：进行各种研讨，产生想法或解决方案，对优先级排序
     * 联合应用开发：将所有利益相关者聚在一起进行开发，发挥群体优势（？）


复杂因素：

* 客户不懂计算机专业知识：除了不能清楚提出只是，不知道什么可行什么不可行，也许会提出不切实际的需求
* 需求工程师不懂客户知识：需求工程师没有客户领域的经验，尤其是一些专业领域的经验
* 需求重复与冲突
* 环境因素：需求在动态变化

### 2. 需求细化

细化是由一系列用户场景建模和求精任务驱动的。

* 场景建模
* 接口管理
* 计划协同

### 3. 需求规格说明

是软件应满足的全部需求，并可以以文档的方式，完整和精确陈述这些需求。
需求规格说明是所有人员对系统达成的共识，是进行系统设计、实现、测试、验收的基本依据，是**最重要的文档**。

**内容：**

* 数据建模：问题的信息域 - 数据
* 功能建模：软件完成的功能 - 用例
* 行为建模：外部事件结果的软件行为 - 活动

**书写方法：**

* 自然语言：用户需求
* 结构化自然语言：将用户需求大致转换（用例表格）
* 图形化符号：简单易懂
* 数学描述：要求更严格的系统

自然语言的要求：

* 设计一个标准格式，统一标准化
* 使用一致性的语言区分强制性、可选性需求
* 对关键性需求进行突出现实
* 避免使用专业术语和缩写词
* 应尝试把需求原理和每一个用户需求联系起来

结构化语言的要求：

*用表格规范。*

可视化图形模型：

* 用例图
* 活动图
* 接口图
* 数据流图
* 状态图

面向对象：用例图、活动图、接口图
面向结构：接口图、数据流图、状态图

### 4. 需求有效性验证

是检验需求是否真正按客户意愿来定义系统的过程。

**执行以下类型的检查：**

* 有效性检查：需求是否对每个用户都是有效有用的
* 一致性检查：需求不该彼此冲突，同一系统不能存在冲突描述
* 完备性检查：所有用户需求是否都覆盖到了
* 真实性检查：检查需求是否能真正实现，到底能不能当做
* 可验收性检查：系统需求应当是可验收的，能有一个检查方法来检验

**方法：**

* 需求评审：由评审人员对需求进行系统性分析
* 原型建立
* 测试用例生成

## 四、软件规格说明书

是最终的目的、最终形成的结果。
需要明确、无二义性地回答：系统要做什么（而不回答怎么做）。

### 1. 需求分析准则

* 必须描述问题的信息域，分析数据的流动，建立数据模型
* 定义软件应完成的功能，建立功能模型
* 必须描述外部事件结果的软件行为，建立行为模型
* 对信息、功能和行为的模型进行分解，分层次展示
* 存在变更，需要进行版本管理

### 2. 内容

1. 概述
   1. 背景：编写目的（与下面那个目的不同，是更背景性的）、面向的读者等
   2. 编写目标：通过这个说明书达成什么目的（比如用户能理解什么）
   3. 相关术语：说明书中专业术语的解释，防止不明确或二义性
   4. 参考资料：参考的标准，如需求规格说明书国标、行业标准、信息安全管理标准
2. 总体要求
   1. 现状和痛点：没有软件之前存在的问题（本系统要解决的问题）
   2. 系统目标：给各种角色提供什么样的服务，以解决上面的痛点
   3. 用户及角色分析：分析清楚系统的用户、以及其目的、要求、任务（要做的事）
   4. 系统边界及上下文环境：指明系统该做什么、不该做什么，给出严格规定。
      存在“上下文模型”，强调这个系统与周边相关联的系统发生的关系，包括资源共享、信息交互
3. 业务需求
4. 功能需求