# 个人对几个概念的辨析

有关硬件的课程：

* 数电实验/计算机组成原理 - FPGA(EP4CE6E22C8/EP3C40F780C8)+外设
* 电子工艺基础 - MCU(esp32)+各种外设或芯片(IC)(e.g. LM324, LED)
* 微机与接口技术 - 微机(CPU(8086)+存储器+外设或芯片(e.g. 8255、LED))
* 电子机械动起来 - MCU(stc51)+外设或芯片(e.g. OpenART)
* 智能嵌入式系统设计 - MCU(stm32)+外设或芯片

## 相关层级

### 电路级别

就是（集成）电路设计，由各种逻辑门组成实现功能。  
两种集成电路设计技术：

* ASIC(Application-Specific Integrated Circuit，专用集成电路)  
  生成的芯片是定制的，电路结构被固化不可更改，故基本功能也是固定的【但一般可通过**软件编程**，由这些基本功能实现各种不同细化功能【比如ARM基本功能是可以通过GPIO口操控外设，然后可利用这个基本功能编程，操控各种不同外设实现各种不同功能  
  因定制而一般有低功耗高性能，设计周期长
* **FPGA**(Field-Programmable Gate Array，现场可编程门阵列)  
  相较于ASIC**可硬件编程**（非软件上的编程），即通过硬件描述语言对其电路结构进行修改，从而更改其基本功能  
  存在灵活性，部署后（生产成FPGA芯片，如EP4CE6E22C8）可重新编程而执行不同任务  
  因灵活性通用性，一般高功耗低性能

这两种技术一般就是各种**芯片**的产生方式。

### 芯片层级

*以下只是举出部分内容，不一定完全，也不一定准确。*

**对于嵌入式：**

* MCU(Micro Control Unit，微控制器、单片机)（称为片内，即那**一片芯片**（e.g. STM32...）内部）  
  ![图 2](images/%E7%A1%AC%E4%BB%B6%E6%A6%82%E5%BF%B5%E8%BE%A8%E6%9E%90--05-07_15-58-31.png)  
  * MPU(Micro Processor Unit，微处理器)（e.g. Cortex-M3内核）  
    ![图 1](images/%E7%A1%AC%E4%BB%B6%E6%A6%82%E5%BF%B5%E8%BE%A8%E6%9E%90--05-07_15-58-12.png)  
    * CPU(或叫Core)（e.g. 采用ARMv7-M**规范**）  
      *ARMv7-M是一种架构规范，Cortex-M3是其的一种实现*
    * NVIC - 中断控制器
    * Memory Protecion Unit(MPU，但不是一个概念) - 内存保护和访问控制
    * AHB - **总线**架构
    * 调试系统
  * **片内**外设(或称片上外设)
    * 系统单元（e.g. 电源控制、时钟产生单元）
    * 存储器（e.g. RAM, ROM）
    * 接口（e.g. GPIO, UART）
    * 定时器/计时器
* **片外**外设（就是开发板上除了那一片ARM芯片的东西）
  * LED
  * 数码管
  * 电机

**对于计算机（即微机）：**

* CPU
* 存储器
* 外设或IC
  * 8255
  * 8259
  * 电机

因为CPU只负责运算和控制，所以需要组合各种其他IC和部件**搭建一个最小系统**，  
单独的CPU是无法运行的。  
*对于单片机的最小系统，几乎只用加个电源就行（如STC51）……*

*需注意：在Proteus仿真中，是虚拟了一个存放程序代码的RAM，所以不需要手动外界RAM，感觉是直接把程序设置存放在8086上的，但实际并不是！*

---

由此可以发现：

* 计算机中的CPU，因为只负责运算和控制，本身没有内存、复杂的中断控制等其他功能，  
  所以引脚有：总线(地址和数据)、时钟信号线、控制信号线。
* 嵌入式芯片的MCU，因为各个所需的模块都在片内，其基本上都是**操作各种片外外设**，  
  所以引脚**大部分都是GPIO口**。

## 单片机和微机的区别

## 开发方式

* FPGA - 硬件描述语言  
  本质就是描述各种针对输入、逻辑处理（组合逻辑和时序逻辑）、返回输出
* 微机 - 汇编  
  本质就是用汇编实现对**内部**的**逻辑**操作，对**外部**操作各种外设的**寄存器**。
  *当然也可以用高级语言，然后翻译成该CPU的汇编语言*  
  > 举例：
  >
  > ![图 3](images/%E7%A1%AC%E4%BB%B6%E6%A6%82%E5%BF%B5%E8%BE%A8%E6%9E%90--05-07_20-39-34.png)  
  > ![图 4](images/%E7%A1%AC%E4%BB%B6%E6%A6%82%E5%BF%B5%E8%BE%A8%E6%9E%90--05-07_21-08-13.png)  
  > 注：问了问，说的是`.DATA`与`DATA SEGMENT`是等价的，但自己没试过【……
* 单片机 - 嵌入式C/C++等  
  用C实现内部的逻辑，以及对外部各种外设的寄存器操作。  
  *当然也可以直接用汇编*  
  因此存在递进关系的开发方式：
  * 基于寄存器：也就是如果要操作外设，就直接对外设的寄存器进行操作。  
    ![图 5](images/%E7%A1%AC%E4%BB%B6%E6%A6%82%E5%BF%B5%E8%BE%A8%E6%9E%90--05-07_22-25-51.png)  
    类比于微机中的，比如设置8255，就用`OUT MY8255_MODE, 80H`（这里把`MOV`操作省略写在一块了）。
  * 基于库：就是把对寄存器的操作封装了，调一个函数就能完成对寄存器的若干步操作。
